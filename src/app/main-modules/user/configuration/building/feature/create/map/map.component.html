<form [formGroup]="form" class="w-100" (ngSubmit)="createSpace()">
  <div class="form row">
    <div class="mb-4 col-md-4">
      <div class="w-100">
        <label for="title" class="form-label">عنوان نقشه</label>
        <input class="form-control text-right" id="title" placeholder=""
               [(ngModel)]="mapDto.title"
               formControlName="title"
               name="title"
        >
      </div>
      <app-alert-error [data]="form.controls['title']" [touched]="touched"></app-alert-error>
    </div>
    <div class="mb-4 col-md-4">
      <div class="w-100">
        <label for="category" class="form-label">دسته بندی نقشه</label>
        <select id="category"
                class="form-control text-right"
                [(ngModel)]="mapDto.category"
                formControlName="category"
                name="category">
          <option [value]="mapEnum[mapEnum.ARCHITECTURAL].toString()">
            پلان معماری
          </option>
          <option [value]="mapEnum[mapEnum.FACILITY].toString()">
            پلان تاسیسات
          </option>
        </select>
      </div>
      <app-alert-error [data]="form.controls['category']" [touched]="touched"></app-alert-error>
    </div>
    <div class="mb-4 col-md-4">
      <div class="w-100">
        <label for="number" class="form-label">شماره نقشه</label>
        <input class="form-control text-right" id="number" placeholder=""
               maxlength="12"
               [(ngModel)]="mapDto.number"
               formControlName="number"
               name="number"
        >
      </div>
      <app-alert-error [data]="form.controls['number']" [touched]="touched"></app-alert-error>
    </div>
    <div class="mb-4 col-md-4">
      <div class="w-100">
        <label class="form-label">بارگزاری نقشه</label>
        <div class="w-100 d-flex mb-3">
          <app-upload-file (uploadFileDomainOut)="uploading($event)"></app-upload-file>
        </div>
      </div>
    </div>
    <div class="mb-4 col-md-4" *ngIf="mapDto.fileLink && mapDto.fileLink !== ' '">
      <div class="w-100">
        <div class="box-image">
          <a href="{{pathUrl + mapDto.fileLink}}" target="_blank">
            <img [src]="pathUrl + mapDto.fileLink" alt="">
          </a>
        </div>
      </div>
    </div>

    <div class="col-12">
      <div (click)="goBack()" *ngIf="!edited" class="btn btn-outline-primary text-center ml-3">بازگشت</div>
      <div (click)="cancelEdit()" *ngIf="edited" class="btn btn-outline-primary text-center ml-3">انصراف</div>
      <button type="submit" *ngIf="!edited" class="btn btn-success text-center ml-3">ثبت</button>
      <button type="submit" *ngIf="edited" class="btn btn-success text-center ml-3">ویرایش</button>
      <button (click)="getNextStep()" *ngIf="!edited && mapList.length > 0" class="btn btn-primary text-center ml-3">ادامه</button>
    </div>

    <ng-container *ngIf="mapList.length > 0">
      <div class="col-12">
        <hr>
      </div>

      <div class="col-12">
        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead class="thead-light">
            <tr>
              <th scope="col" width="40">#</th>
              <th scope="col">عنوان نقشه</th>
              <th scope="col">دسته بندی نقشه</th>
              <th scope="col">شماره نقشه</th>
              <th scope="col" width="80" colspan="2">عملیات</th>
            </tr>
            </thead>
            <tbody>
            <ng-container *ngFor="let item of mapList; let i = index">
              <tr>
                <th scope="row" width="40">{{i + 1}}</th>
                <td>{{item.title}}</td>
                <td>{{mapEnum[item.category].toString()}}</td>
                <td>{{item.number}}</td>
                <td width="40"><span class="cursor-pointer fa fa-edit" (click)="editSpace(item)"></span></td>
                <td width="40"><span class="cursor-pointer fa fa-trash" (click)="deleteSpace(i, item.id)"></span></td>

              </tr>
            </ng-container>
            </tbody>
          </table>
        </div>
      </div>
    </ng-container>


  </div>
</form>
